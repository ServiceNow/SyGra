@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
	/* Surface colors */
	--surface: #ffffff;
	--surface-secondary: #f9fafb;
	--surface-tertiary: #f3f4f6;
	--surface-hover: #f3f4f6;
	--surface-selected: #ede9fe;
	--surface-inverse: #1f2937;

	/* Frost/overlay colors */
	--frost: rgba(255, 255, 255, 0.8);
	--frost-secondary: rgba(255, 255, 255, 0.6);

	/* Brand colors */
	--primary: #8b5cf6;
	--primary-hover: #7c3aed;
	--primary-light: #ede9fe;
}

.dark {
	--surface: #0f172a;
	--surface-secondary: #1e293b;
	--surface-tertiary: #334155;
	--surface-hover: #334155;
	--surface-selected: #3730a3;
	--surface-inverse: #f9fafb;

	--frost: rgba(15, 23, 42, 0.8);
	--frost-secondary: rgba(15, 23, 42, 0.6);

	--primary: #a78bfa;
	--primary-hover: #8b5cf6;
	--primary-light: #3730a3;
}

/* SvelteFlow customizations */
.svelte-flow {
	--xy-background-color: var(--surface-secondary);
	--xy-background-pattern-color: var(--surface-tertiary);
	--xy-node-background-color: var(--surface);
	--xy-node-border-color: var(--surface-tertiary);
}

.svelte-flow__node {
	transition: box-shadow 0.2s ease, transform 0.1s ease;
	/* Remove default SvelteFlow node styling */
	background: transparent !important;
	border: none !important;
	border-radius: 0 !important;
	padding: 0 !important;
}

.svelte-flow__node:hover {
	transform: translateY(-1px);
}

.svelte-flow__node.selected {
	box-shadow: none !important;
}

.svelte-flow__node.selected > div {
	box-shadow: 0 0 0 2px var(--primary);
	border-radius: 0.75rem;
}

/* MiniMap interactivity */
.svelte-flow__panel.bottom.left {
	z-index: 10;
	pointer-events: auto !important;
}

.svelte-flow__minimap {
	cursor: pointer;
	pointer-events: auto !important;
}

.svelte-flow__minimap-svg {
	cursor: grab;
	pointer-events: auto !important;
	touch-action: none;
	user-select: none;
	-webkit-user-select: none;
	-webkit-tap-highlight-color: transparent;
}

.svelte-flow__minimap-svg:active {
	cursor: grabbing;
}

/* Ensure minimap nodes don't block pan/zoom events */
.svelte-flow__minimap-svg rect,
.svelte-flow__minimap-svg .svelte-flow__minimap-node {
	pointer-events: none !important;
}

/* Mask should pass through events */
.svelte-flow__minimap-mask {
	pointer-events: none !important;
}

/* Execution status animations */
@keyframes pulse-ring {
	0% {
		box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.4);
	}
	70% {
		box-shadow: 0 0 0 8px rgba(59, 130, 246, 0);
	}
	100% {
		box-shadow: 0 0 0 0 rgba(59, 130, 246, 0);
	}
}

.node-running {
	animation: pulse-ring 1.5s cubic-bezier(0.215, 0.61, 0.355, 1) infinite;
}

/* Custom scrollbar */
::-webkit-scrollbar {
	width: 8px;
	height: 8px;
}

::-webkit-scrollbar-track {
	background: var(--surface-secondary);
}

::-webkit-scrollbar-thumb {
	background: var(--surface-tertiary);
	border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
	background: #9ca3af;
}

/* Monaco editor container */
.monaco-editor-container {
	width: 100%;
	height: 100%;
	min-height: 200px;
}
